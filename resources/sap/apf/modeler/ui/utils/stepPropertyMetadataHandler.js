/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare('sap.apf.modeler.ui.utils.stepPropertyMetadataHandler');jQuery.sap.require('sap.apf.modeler.ui.utils.constants');(function(){'use strict';var c=sap.apf.modeler.ui.utils.CONSTANTS;sap.apf.modeler.ui.utils.StepPropertyMetadataHandler=function(C,s){this.oCoreApi=C;this.oStep=s;};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.constructor=sap.apf.modeler.ui.utils.StepPropertyMetadataHandler;function _(s,a){var p=[],A;var S=s.oStep.getSelectProperties();S.forEach(function(P){if(s.getPropertyMetadata(P)){A=s.getPropertyMetadata(P)["aggregation-role"];if(A===a){p.push(P);}}});return p;}sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.getDimensions=function(){return _(this,c.aggregationRoles.DIMENSION);};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.getMeasures=function(){return _(this,c.aggregationRoles.MEASURE);};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.getProperties=function(){return this.oStep.getSelectProperties();};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.getPropertyMetadata=function(p){var a=this.oStep.getService();var e=this.oStep.getEntitySet();var E=this.oCoreApi.getEntityTypeMetadata(a,e);if(!E){return undefined;}return E.getPropertyMetadata(p);};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.getDefaultLabel=function(p){var s=this;var P=s.getPropertyMetadata(p);if(!P){return"";}return P.label||P.name;};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler.prototype.hasTextPropertyOfDimension=function(d){var i=false,s,S=this;var D=S.getPropertyMetadata(d);if(!D){return i;}if(D.text){s=this.oStep.getSelectProperties();i=s.indexOf(D.text)===-1?false:true;}return i;};})();
