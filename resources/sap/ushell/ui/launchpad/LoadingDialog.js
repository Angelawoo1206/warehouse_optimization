/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{"iconUri":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},"text":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},"loadAnimationWithInterval":{type:"boolean",group:"Appearance",defaultValue:true}}}});(function(){"use strict";jQuery.sap.require("sap.ui.core.Icon");jQuery.sap.require("sap.ui.core.Popup");jQuery.sap.require("sap.m.Label");jQuery.sap.require('sap.ushell.ui.launchpad.AccessibilityCustomData');sap.ushell.ui.launchpad.LoadingDialog.prototype.init=function(){this._oPopup=new sap.ui.core.Popup();this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new sap.ui.core.Icon();this._oLabel=new sap.m.Label(this.getId()+'loadingLabel');this.sState="idle";this.sLoadingString=sap.ushell.resources.i18n.getText("genericLoading").replace("..."," ");};sap.ushell.ui.launchpad.LoadingDialog.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};sap.ushell.ui.launchpad.LoadingDialog.prototype.isOpen=function(){return this._oPopup.isOpen();};sap.ushell.ui.launchpad.LoadingDialog.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy";}if(this.getLoadAnimationWithInterval()){this.toggleStyleClass('sapUshellVisibilityHidden',true);this._iTimeoutId=setTimeout(function(){this.toggleStyleClass('sapUshellVisibilityHidden',false);this.$().focus();}.bind(this),3000);}else{this.toggleStyleClass('sapUshellVisibilityHidden',false);this.$().focus();}if(!this.getVisible()){this.setProperty('visible',true,true);this.$().show();}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.setLoadAnimationWithInterval=function(s){this.setProperty('loadAnimationWithInterval',s,true);};sap.ushell.ui.launchpad.LoadingDialog.prototype.showAppInfo=function(a,i,A){this.setProperty('text',a,true);this.setProperty('iconUri',i,true);this.oIcon.setSrc(i);this._oLabel.setText(a);this._oLabel.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:'aria-hidden',value:"true",writeToDom:true}));if(jQuery("#"+this.getId()+"accessibility-helper")[0]&&A){jQuery("#"+this.getId()+"accessibility-helper")[0].innerText=this.sLoadingString;}};sap.ushell.ui.launchpad.LoadingDialog.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId);}if(this.getVisible()){this.sState="idle";this.setProperty('visible',false,true);this.$().hide();this._oPopup.close();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.onAfterRendering=function(){this.$().css("width","20rem");};}());
