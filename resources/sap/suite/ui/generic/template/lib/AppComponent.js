/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/UIComponent","sap/m/NavContainer","sap/ui/generic/app/ApplicationController","sap/suite/ui/generic/template/lib/BusyHelper","sap/suite/ui/generic/template/lib/NavigationController","sap/suite/ui/generic/template/lib/TemplateAssembler","sap/m/MessageBox","sap/suite/ui/generic/template/lib/CRUDHelper","sap/m/DraftIndicatorState","sap/suite/ui/generic/template/library"],function(q,U,N,A,B,a,T,M,C,D){"use strict";function g(o,t){var c;var n;function p(l){var m=Object.keys(l).map(function(r){var s=l[r];if(s.pages){s.pages=p(s.pages);}return l[r];});return m;}var d;function e(){if(!d){var m=o.getMetadata();d=m.getManifestEntry("sap.ui.generic.app");if(d._version==="1.3.0"&&d.pages&&q.isPlainObject(d.pages)){d.pages=p(d.pages);}}return d;}var i;function f(){if(!i){i=q.extend({},o.getMetadata().getManifest());i["sap.ui.generic.app"]=e();}return i;}function h(){t.oTemplatePrivateGlobalModel.setProperty("/generic",{draftIndicatorState:D.Clear,hasOwnTitle:false,paginatorInfo:{}});o.setModel(t.oTemplatePrivateGlobalModel,"_templPrivGlobal");t.oNoOwnTitlePromise.then(function(l){t.oTemplatePrivateGlobalModel.setProperty("/generic/hasOwnTitle",!l);});}function j(c){c.attachEvent("beforeSideEffectExecution",function(E){if(E.getParameter("valueChange")||E.getParameter("fieldControl")){var P=E.getParameter("promise");t.oBusyHelper.setBusy(P);}});var l=o.getModel("_templPrivGlobal");var s="/generic/draftIndicatorState";c.attachBeforeQueueItemProcess(function(E){if(E.draftSave){l.setProperty(s,D.Saving);}});c.attachOnQueueCompleted(function(){if(l.getProperty(s)===D.Saving){l.setProperty(s,D.Saved);}});c.attachOnQueueFailed(function(){if(l.getProperty(s)===D.Saving){l.setProperty(s,D.Clear);}});}function k(m){m.attachPropertyChange(function(E){C.propertyChange(E.getParameter("path"),E.getParameter("context"),t,o);});}return{init:function(){var m=o.getModel();if(m){c=new A(m);h();n=new a(o,t);j(c);k(m);if((!m.oMetadata||!m.oMetadata.isLoaded())||m.oMetadata.isFailed()){m.attachMetadataFailed(function(){n.navigateToMessagePage({title:t.getText("ST_GENERIC_ERROR_TITLE"),text:t.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE"),icon:"sap-icon://message-error",description:t.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_DESC")});for(var l in t.componentRegistry){t.componentRegistry[l].fnViewRegisteredResolve();}});}}t.oBusyHelper.setBusyReason("initAppComponent",false);},exit:function(){if(t.oNavContainer){t.oNavContainer.destroy();}if(c){c.destroy();}if(n){n.destroy();}},publicMethods:{createContent:function(){if(t.oNavContainer){return"";}t.oNavContainer=new N({id:o.getId()+"-appContent"});t.oBusyHelper=new B(t);t.oBusyHelper.setBusyReason("initAppComponent",true,true);t.oNavContainer.attachAfterNavigate(t.oApplicationProxy.onAfterNavigate);return t.oNavContainer;},getConfig:e,getInternalManifest:f,getTransactionController:function(){return c.getTransactionController();},getApplicationController:function(){return c;},getNavigationController:function(){return n;}}};}var b=T.getAppComponent(g,U,"sap.suite.ui.generic.template.lib.AppComponent",{metadata:{config:{"title":"SAP UI Application Component",fullWidth:true},events:{pageDataLoaded:{}},routing:{config:{routerClass:"sap.m.routing.Router",viewType:"XML",viewPath:"",clearTarget:false},routes:[],targets:[]},library:"sap.suite.ui.generic.template"}});delete T.getAppComponent;return b;});
