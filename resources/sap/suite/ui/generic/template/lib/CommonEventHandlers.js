sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/m/ComboBox","sap/m/MessageBox","sap/m/MessageToast","sap/m/Table","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/comp/smartfilterbar/SmartFilterBar","sap/ui/table/AnalyticalTable","sap/ui/table/Table","sap/ui/model/odata/type/Time","sap/suite/ui/generic/template/lib/testableHelper"],function(q,B,D,C,M,a,T,F,S,b,A,U,c,t){"use strict";function g(p){var s="";var m=[];return function(o){var l="";var e=p;var f;for(var h in m){if(m[h].path===p){f=m[h];break;}}if(!f){var i=o.getModel("entitySet").getMetaModel();var P=i.getObject(i.getMetaContext(o.sPath+"/"+p).sPath);if(P){var j=" ";for(var k=0;k<P.extensions.length;k++){if(P.extensions[k].namespace==="http://www.sap.com/Protocols/SAPData"){switch(P.extensions[k].name){case"display-format":j=P.extensions[k].value;break;case"label":l=P.extensions[k].value;break;case"text":var n=P.extensions[k].value;var r=p.split("/");r[r.length-1]=n;e=r.join("/");break;default:break;}}}if(l===""){l=p;}f={path:p,data:{type:P.type,displayFormat:j,label:l,textPath:e}};m.push(f);}}l=f.data.label;if(f.data.textPath!==""){if(f.data.textPath===p){s=o.getProperty(f.data.textPath);}else{s=o.getProperty(f.data.textPath)+" ("+o.getProperty(p)+")";}if(s===null||s===undefined){s="";}}else if(o.getProperty(p)!==""){s=o.getProperty(p);}switch(f.data.type){case"Edm.DateTime":if(f.data.displayFormat==="Date"){var u=D.getDateInstance({style:"medium"});var v=new Date(0).getTimezoneOffset()*60*1000;if(s&&s!==""&&s.getTime){s=u.format(new Date(s.getTime()+v));}}break;case"Edm.Time":if(s&&s!==""){var w=new c();s=w.formatValue(s,"string");}break;case"Edm.Boolean":if(s===true){s="{i18n>YES}";}else if(s===false){s="{i18n>NO}";}break;default:break;}return{key:s?s:p,text:l?l+": "+s:s};};}function d(o,e,s,f){function E(i){var j={};for(var k in i){var c1=i[k];if(typeof c1==="string"){j[k]=c1;}else if(typeof c1==="object"){if(c1.value){j[k]=E(c1).value;}else{j[k]=c1;}}}return j;}function h(i){if(i instanceof sap.ui.generic.app.navigation.service.NavError){sap.m.MessageBox.show(i.getErrorCode(),{title:f.getText("ST_GENERIC_ERROR_TITLE")});}}function l(){return new Promise(function(i,j){var k=o.getView().getBindingContext();var c1=k.getObject();if(c1.hasOwnProperty("HasActiveEntity")&&c1.HasActiveEntity&&c1.hasOwnProperty("SiblingEntity")){var d1=o.getView().getModel();d1.read(k.getPath()+"/SiblingEntity",{success:function(e1){var f1=d1.getContext("/"+d1.getKey(e1));i(f1);},error:function(e1){j(e1);}});}else{i();}});}var I;var m;function n(i){I=true;m=i;var j=f.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){q.sap.log.info("Draft cancellation confirmed");if(!I){q.sap.log.info("Draft popover no longer active -> Ignore.");return;}var k=s.oApplication.getBusyHelper();if(k.isBusy()){q.sap.log.info("Ignore discarding confirmation as app is already busy");return;}q.sap.log.info("Discarding was confirmed, draft will be discarded");k.setBusy(m);m.then(function(c1){q.sap.log.info("Active information for current draft has been read. Start discarding the draft");var d1=c1&&c1.getObject();var e1=d1&&d1.IsActiveEntity;var f1=s.oCRUDManager.deleteEntity();f1.then(function(){q.sap.log.info("Draft was discarded successfully");I=false;j.close();q.sap.log.info("Draft popover closed");s.oViewDependencyHelper.setRootPageToDirty();s.oViewDependencyHelper.unbindChildren(o.getOwnerComponent());if(e1){q.sap.log.info("Navigate to active entityy");s.oNavigationController.navigateToContext(c1,undefined,true,1);}else{q.sap.log.info("Deleted draft was create draft. Navigate back");s.oNavigationController.navigateBack();}});var g1={discardPromise:f1};e.fire(o,"AfterCancel",g1);},function(c1){j.close();});}},"discard");return j;}var p;function r(){p=true;var i=f.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardSubItemPopover",{onDiscardConfirm:function(){q.sap.log.info("Sub item cancellation confirmed");if(!p){q.sap.log.info("Sub item popover no longer active -> Ignore.");return;}var j=s.oCRUDManager.deleteEntity(false,true);j.then(function(){var c1=o.getOwnerComponent();s.oViewDependencyHelper.setParentToDirty(c1,c1.getNavigationProperty());s.oViewDependencyHelper.unbindChildren(c1,true);i.close();p=false;s.oNavigationController.navigateBack();});var k={deleteEntityPromise:j};e.fire(o,"AfterDelete",k);}},"discard");return i;}function u(j){var k=j;var c1=-1,d1=-1;var e1=f.getOwnerControl(j);if(e1.getTable){e1=e1.getTable();}var f1=e1 instanceof A;if(!f1){var g1=f.getTableBinding(e1);var h1=g1&&g1.binding;var i1=null;if(h1){if(e1 instanceof U){i1=h1.getContexts();}else if(e1 instanceof T){i1=h1.getCurrentContexts();}}var j1=null;var k1=f.getSelectedContexts(e1);var l1=null;if(k1&&k1.length>0){l1=k1[0].getPath();}else if(k){if(e1 instanceof T){l1=k.getBindingContext()?k.getBindingContext().sPath:null;}}if(h1&&h1.getContexts&&l1){i1=h1.getCurrentContexts();for(var i=0;i<i1.length;i++){j1=i1[i];if(j1.getPath()===l1){c1=i;break;}}}if(e1&&c1!==-1){d1=h1.getLength();var m1=Math.floor(d1/5);if(e1 instanceof T){m1=e1.getGrowingThreshold();}else if(e1 instanceof U){m1=e1.getThreshold();}var n1=null;if(h1&&e1 instanceof U){n1=h1.getContexts();}else if(h1&&e1 instanceof T){n1=h1.getCurrentContexts();}var o1=n1&&{listBinding:h1,tableMaxItems:d1,growingThreshold:m1,selectedRelativeIndex:c1,objectPageNavigationContexts:n1,tableNavFrom:e1,endIndex:n1.length-1};var p1=e.getTemplatePrivateModel();var q1=p1.getProperty("/currentPageTitle");var r1=o.byId("objectPageHeader");var s1=r1&&r1.data("objectTypeName");e.addDataForNextPage({"previousPageTitle":q1,"currentPageTitle":s1});var t1=p1.getProperty("/generic/viewLevel");var u1=o.getOwnerComponent().getModel("_templPrivGlobal");u1.setProperty("/generic/paginatorInfo/"+t1,o1);}}}function v(j,k){var c1=o.getView().getModel().getMetaModel();var d1=k;var e1=c1.getODataEntitySet(j,false);var f1=c1.getODataEntityType(e1.entityType,false);var g1=f1.key.propertyRef;var i;var h1=s.oDraftController.getDraftContext();if(h1.isDraftEnabled(j)){g1=g1.concat(h1.getSemanticKey(j));g1.push({name:"IsActiveEntity"},{name:"HasDraftEntity"},{name:"HasActiveEntity"});}if(d1.parameters.select&&d1.parameters.select.length>0){var i1=d1.parameters.select.split(",");for(i=0;i<g1.length;i++){if(q.inArray(g1[i].name,i1)===-1){d1.parameters.select+=","+g1[i].name;}}}return d1;}function w(i,j){var k=i.getSource().getUrl();i.preventDefault();f.processDataLossConfirmationIfNonDraft(function(){sap.m.URLHelper.redirect(k,false);},q.noop,j);}function x(i,j){i.preventDefault();var k=i.getSource().getHref();f.processDataLossConfirmationIfNonDraft(function(){window.location.hash=k;},q.noop,j);}function y(j){return f.getDialogFragment("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(i){var k=i.getSource().getParent();k.close();},onDelete:function(k){var c1=k.getSource().getParent();var d1=c1.getModel("delete");var e1=d1.getProperty("/items");var f1=[];for(var i=0;i<e1.length;i++){if(!e1[i].draftStatus.locked&&e1[i].deletable){if(e1.length===d1.getProperty("/unsavedChangesItemsCount")||!e1[i].draftStatus.unsavedChanges||d1.getProperty("/checkboxSelected")){f1.push(e1[i].context.getPath());}}}s.oCRUDManager.deleteEntities(f1).then(function(g1){var h1=j.getTable();h1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",false);var i1=f1.length-g1.length;if(g1.length>0){var j1="";if(i1>0){j1+=(i1>1)?f.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL_WITH_COUNT",[i1]):f.getText("ST_GENERIC_DELETE_SUCCESS_WITH_COUNT",[i1]);j1+="\n";j1+=(g1.length>1)?f.getText("ST_GENERIC_DELETE_ERROR_PLURAL_WITH_COUNT",[g1.length]):f.getText("ST_GENERIC_DELETE_ERROR_WITH_COUNT",[g1.length]);}else{j1=(g1.length>1)?f.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):f.getText("ST_GENERIC_DELETE_ERROR");}M.error(j1);}else{var k1="";k1=(i1>1)?f.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):f.getText("ST_GENERIC_OBJECT_DELETED");a.show(k1);}j.getTable().attachEventOnce("updateFinished",function(){f.setEnabledToolbarButtons(j);});j.rebindTable();},function(g1){M.error(f.getText("ST_GENERIC_DELETE_ERROR_PLURAL",[f1.length]),{styleClass:f.getContentDensityClass()});});c1.close();}},"delete");}function z(j){var k=o.getView().getModel();var c1=k.getMetaModel();var d1=c1.getODataEntitySet(o.getOwnerComponent().getEntitySet());var e1=d1["Org.OData.Capabilities.V1.DeleteRestrictions"];var f1=(e1&&e1.Deletable&&e1.Deletable.Path)?e1.Deletable.Path:"";var g1={items:undefined,itemsCount:j.length,text:{title:undefined,shortText:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,checkboxSelected:true};var h1=[];for(var i=0;i<j.length;i++){var i1=k.getObject(j[i].getPath());var j1={};var k1=true;if(!i1.IsActiveEntity){j1.draft=true;}else if(i1.HasDraftEntity){var l1=k.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);if(l1){j1.locked=true;j1.user=l1;g1.lockedItemsCount++;}else{j1.unsavedChanges=true;j1.user=k.getProperty("DraftAdministrativeData/LastChangedByUser",j[i]);g1.unsavedChangesItemsCount++;}}if(f1&&f1!==""){if(k.getProperty(f1,j[i])===false){k1=false;g1.undeletableCount++;}}h1.push({context:j[i],draftStatus:j1,deletable:k1});}g1.items=h1;if(g1.lockedItemsCount===g1.itemsCount){g1.text.title=f.getText("ST_GENERIC_ERROR_TITLE");}else{g1.text.title=(g1.itemsCount>1)?f.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[g1.itemsCount]):f.getText("ST_GENERIC_DELETE_TITLE");}g1.text.unsavedChanges=f.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(g1.itemsCount>1){if(g1.lockedItemsCount===g1.itemsCount){g1.text.shortText=f.getText("ST_GENERIC_DELETE_LOCKED_PLURAL");}else if(g1.unsavedChangesItemsCount===g1.itemsCount){g1.text.shortText=f.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL");}else if(g1.lockedItemsCount>0){var m1=g1.itemsCount-g1.lockedItemsCount;g1.text.shortText=(g1.lockedItemsCount>1)?f.getText("ST_GENERIC_CURRENTLY_LOCKED_PLURAL",[g1.lockedItemsCount,g1.itemsCount]):f.getText("ST_GENERIC_CURRENTLY_LOCKED",[g1.itemsCount]);g1.text.shortText+="\n";if(m1===g1.unsavedChangesItemsCount){g1.text.shortText+=(m1>1)?f.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL"):f.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");}else{g1.text.shortText+=(m1>1)?f.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[m1]):f.getText("ST_GENERIC_DELETE_REMAINING");}}else{g1.text.shortText=f.getText("ST_GENERIC_DELETE_SELECTED_PLURAL");}if(g1.undeletableCount>0){g1.text.undeletableText=f.getText("ST_GENERIC_DELETE_UNDELETABLE",[g1.undeletableCount,g1.itemsCount]);}}else{if(g1.lockedItemsCount>0){g1.text.shortText=f.getText("ST_GENERIC_DELETE_LOCKED",[" ",g1.items[0].draftStatus.user]);}else if(g1.unsavedChangesItemsCount>0){g1.text.shortText=f.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",g1.items[0].draftStatus.user]);}else{g1.text.shortText=f.getText("ST_GENERIC_DELETE_SELECTED");}}return g1;}function G(i){M.error(f.getText(i),{styleClass:f.getContentDensityClass()});}function H(i,j,k,c1){var d1=f.getNavigationHandler();var e1={};var f1={};for(var g1 in i.parameters){if(q.isEmptyObject(i.parameters[g1])){e1[g1]=i.parameters[g1];}else{f1[g1]=i.parameters[g1];}}f1=E(f1);d1.mixAttributesAndSelectionVariant({},c1).getParameterNames().forEach(function(g1){delete e1[g1];});var h1=k&&k.getObject();var i1=j&&j.getObject();var j1=q.extend({},e1,h1,i1,f1);return d1.mixAttributesAndSelectionVariant(j1,c1);}function N(i,j,k,c1){var d1=f.getNavigationHandler();var e1;var f1={};if(k){e1=k.getDataSuiteFormat();f1={selectionVariant:e1,tableVariantID:c1.getCurrentVariantId()};}var g1=H(i,j,o.getView().getBindingContext(),e1);d1.navigate(i.semanticObject,i.action,g1.toJSONString(),f1,h);}function J(i,j,k){var c1=o.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var d1=c1.crossNavigation.outbounds[i.data("CrossNavigation")];var e1;if(k){e1=i.getParent().getParent();}N(d1,j,k,e1);}function K(j,k){for(var i=0;i<j.length;i++){if(j[i].indexOf("/")!==-1){var c1=j[i].split("/");c1.pop();var d1=c1.join("/");if(k.indexOf(d1)===-1){k.push(d1);}}}}function L(i,j){}function O(i,f){var c1=i.getSource();var d1=c1.getTable();if(d1 instanceof T){var e1=d1.getColumns();for(var f1=0;f1<e1.length;f1++){if(e1[f1].getCustomData()[0].getValue()&&e1[f1].getCustomData()[0].getValue()["actionButton"]==="true"){e1[f1].setPopinDisplay("WithoutHeader");}}}var g1=i.getParameter("bindingParams");g1.parameters=g1.parameters||{};var h1=o.byId(c1.getSmartFilterId());if(h1 instanceof b){var i1=h1.getControlByKey("EditState");if(i1 instanceof C){var j1=i1.getSelectedKey();switch(j1){case"1":g1.filters.push(new F("IsActiveEntity","EQ",true));g1.filters.push(new F("HasDraftEntity","EQ",false));break;case"2":g1.filters.push(new F("IsActiveEntity","EQ",false));break;case"3":g1.filters.push(new F("IsActiveEntity","EQ",true));g1.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));g1.filters.push(new F("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":g1.filters.push(new F("IsActiveEntity","EQ",true));g1.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));g1.filters.push(new F("DraftAdministrativeData/InProcessByUser","EQ",""));break;default:var k1=new F({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(g1.filters[0]&&g1.filters[0].aFilters){var l1=g1.filters[0];g1.filters[0]=new F([l1,k1],true);}else{g1.filters.push(k1);}break;}}}v(c1.getEntitySet(),g1);var m1=g1.parameters.select&&g1.parameters.select.split(",")||[];var n1=g1.parameters&&g1.parameters.expand&&g1.parameters.expand.split(",")||[];var o1=c1.getEntitySet();if(m1&&m1.length>0){var p1=c1.getModel().getMetaModel();var q1=p1.getODataEntitySet(o1);var r1={};var s1=p1.getODataEntityType(q1.entityType);for(var t1=0;t1<m1.length;t1++){var u1=m1[t1];if(u1){var r1=p1.getODataProperty(s1,u1);if(r1&&r1["com.sap.vocabularies.Common.v1.FieldControl"]&&r1["com.sap.vocabularies.Common.v1.FieldControl"].Path){var v1=r1["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(v1!==" "&&g1.parameters.select.search(v1)===-1){g1.parameters.select+=","+v1;m1.push(v1);}}}}if(d1 instanceof T){var w1=g1.sorter[0];if(w1&&w1.vGroup){var x1=p1.getODataProperty(s1,w1.sPath);var y1=x1["sap:text"]||(x1["com.sap.vocabularies.Common.v1.Text"]||"").Path||"";if(y1){if(q.inArray(y1,m1)===-1){g1.parameters.select+=","+y1;m1.push(y1);}}}}var z1=q1["Org.OData.Capabilities.V1.DeleteRestrictions"];if(z1&&z1.Deletable&&z1.Deletable.Path&&g1.parameters.select.search(z1.Deletable.Path)===-1){g1.parameters.select+=","+z1.Deletable.Path;m1.push(z1.Deletable.Path);}var A1,B1;var s1=p1.getODataEntityType(q1.entityType);var C1=s1["com.sap.vocabularies.UI.v1.LineItem"]||[];for(var t1=0;t1<C1.length;t1++){if(C1[t1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){A1=p1.getODataFunctionImport(C1[t1].Action.String,true);if(A1){B1=p1.getObject(A1);if(B1["sap:action-for"]!==" "&&B1["sap:applicable-path"]!==" "&&g1.parameters.select.search(B1["sap:applicable-path"])===-1){g1.parameters.select+=","+B1["sap:applicable-path"];m1.push(B1["sap:applicable-path"]);}}}}var D1=f.getBreakoutActionsForTable(c1,o);var E1=f.getBreakoutActionsFromManifest(d1.getModel());for(var F1 in E1){if(q.inArray(E1[F1].id,D1)!==-1){if(E1[F1].requiresSelection&&E1[F1].applicablePath){if(g1.parameters.select.search(E1[F1].applicablePath)===-1){g1.parameters.select+=","+E1[F1].applicablePath;m1.push(E1[F1].applicablePath);}}}}}K(m1,n1);var G1=s.oDraftController.getDraftContext();if(G1.isDraftEnabled(o1)&&G1.isDraftRoot(o1)){if(G1.hasDraftAdministrativeData(o1)){if(m1&&m1.length>0){if(m1.indexOf("DraftAdministrativeData")===-1){g1.parameters.select=g1.parameters.select+",DraftAdministrativeData";}}if(n1.indexOf("DraftAdministrativeData")===-1){n1.push("DraftAdministrativeData");}}}if(n1.length>0){g1.parameters.expand=n1.join(",");}var H1=c1.getCustomData();var I1={};for(var k=0;k<H1.length;k++){I1[H1[k].getKey()]=H1[k].getValue();}var J1=c1.fetchVariant();if((!J1||!J1.sort)&&d1 instanceof T&&I1.TemplateSortOrder){var K1=I1.TemplateSortOrder.split(", ");for(var j=0;j<K1.length;j++){var L1=K1[j].split(" ");if(L1.length>1){g1.sorter.push(new S(L1[0],L1[1]==="true"));}else{g1.sorter.push(new S(L1[0]));}}}if(d1 instanceof T){var w1=g1.sorter[0];if(w1&&w1.vGroup){w1.fnGroup=g(w1.sPath);}}c1.getTable().attachEventOnce("updateFinished",function(){f.setEnabledToolbarButtons(c1);f.setEnabledFooterButtons(c1,o);});}function P(i,j){f.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){J(i,i.getBindingContext(),j.oSmartFilterbar);return;}u(i);f.navigateFromListItem(i.getBindingContext(),i.getParent());},q.noop,j);}function Q(i,j){var k=i.getParent().getParent().getTable();var c1=f.getSelectedContexts(k);switch(c1.length){case 0:G("ST_GENERIC_NO_ITEM_SELECTED");return;case 1:f.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){J(i,c1[0],j.oSmartFilterbar);return;}u(i);f.navigateFromListItem(c1[0],k);},q.noop,j);return;default:G("ST_GENERIC_MULTIPLE_ITEMS_SELECTED");return;}}function R(i,j){var k=i.getSource();var c1=f.getOwnerControl(k);var d1=f.getSelectedContexts(c1);switch(d1.length){case 0:case 1:f.processDataLossConfirmationIfNonDraft(function(){var e1={action:k.data('Action'),semanticObject:k.data('SemanticObject')};N(e1,d1[0],j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);return;default:G("ST_GENERIC_MULTIPLE_ITEMS_SELECTED");return;}}function V(i,j,k){f.processDataLossConfirmationIfNonDraft(function(){var c1={action:j.Action,semanticObject:j.SemanticObject};N(c1,i,k.oSmartFilterbar,k.oSmartTable);},q.noop,k);}function W(i,j){f.processDataLossConfirmationIfNonDraft(function(){var k={semanticObject:i.data("SemanticObject"),action:i.data("Action")};var c1=i.getParent().getBindingContext();N(k,c1,j.oSmartFilterbar,j.oSmartTable);},q.noop,j);}function X(i,j){var k,c1="";var d1=f.getOwnerControl(i.getSource());var e1=i.getSource().data();var f1=f.getSelectedContexts(d1);var g1=d1.getMetadata().getName();if(g1==="sap.ui.comp.smarttable.SmartTable"){k=d1.getTable();c1=d1.getTableBindingPath();}else if(g1==="sap.ui.comp.smartchart.SmartChart"){k=d1.getChart();c1=d1.getChartBindingPath();}Y({functionImportPath:e1.Action,contexts:f1,sourceControl:k,label:e1.Label,operationGrouping:e1.InvocationGrouping,navigationProperty:""},j,c1);}function Y(i,j,k){var c1;f.processDataLossConfirmationIfNonDraft(function(){s.oCRUDManager.callAction({functionImportPath:i.functionImportPath,contexts:i.contexts,sourceControl:i.sourceControl,label:i.label,operationGrouping:i.operationGrouping,navigationProperty:i.navigationProperty},j).then(function(d1){if(d1&&d1.length&&d1.length===1){c1=d1[0];if(c1.response&&c1.response.context&&(!c1.actionContext||c1.actionContext&&c1.response.context.getPath()!==c1.actionContext.getPath())){s.oViewDependencyHelper.setMeToDirty(o.getOwnerComponent(),k);}}});},q.noop,j,"Proceed");}function Z(i){var j=i.getSource();var k=l();var c1=n(k);var d1=c1.getModel("discard");d1.setProperty("/placement",sap.m.PlacementType.Top);var e1=o.getView().getBindingContext();var f1=e1.getObject();var g1=f1.hasOwnProperty("HasActiveEntity")&&!e1.getProperty("IsActiveEntity")&&!e1.getProperty("HasActiveEntity");d1.setProperty("/isCreateDraft",g1);c1.openBy(j);}function $(i){var j=i.getSource();var k=j.getCustomData();var c1=r();var d1=c1.getModel("discard");var e1=k&&k[0]?k[0].getValue():sap.m.PlacementType.Top;d1.setProperty("/placement",e1);c1.openBy(j);}function _(i,j,k){if(i.data("CrossNavigation")){J(i,i.getBindingContext(),k);return new Promise(function(g1){g1();});}e.addDataForNextPage({"addEntry":true,"addEntryForDeleteButton":true,"addEntryForCancelButton":true});var c1=f.getOwnerControl(i);var d1=c1.getTableBindingPath();var e1=o.getOwnerComponent();var f1=s.oCRUDManager.addEntry(c1).then(function(g1){if(!j){s.oNavigationController.navigateToContext(g1.newContext,g1.tableBindingPath,false,4);s.oViewDependencyHelper.setMeToDirty(e1,d1);}else{c1.rebindTable();}});f1.catch(q.noop);return f1;}function a1(i){var j=f.getOwnerControl(i.getSource());var k=f.getSelectedContexts(j);if(k&&k.length>0){var c1=z(k);var d1=y(j);var e1=d1.getModel("delete");e1.setData(c1);d1.open();}else{M.error(f.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:f.getContentDensityClass()});}}function b1(i){var j;if(i.getSource().data("Location")==="Header"){j=i.getSource().getParent().getAggregation("items")[0];}else{j=i.getSource().getParent().getParent().getParent().getParent().getParent().getAggregation("items")[1];}j.bindElement(i.getSource().getBindingContext().getPath());j.openBy(i.getSource());}var H=t.testable(H,"fnBuildSelectionVariantForNavigation");var E=t.testable(E,"fnEvaluateParameters");return{onBeforeRebindTable:O,onListNavigate:P,onShowDetails:Q,onEditNavigateIntent:J,onSemanticObjectLinkPopoverLinkPressed:L,onDataFieldForIntentBasedNavigation:R,onDataFieldForIntentBasedNavigationSelectedContext:V,onInlineDataFieldForIntentBasedNavigation:W,onSmartFieldUrlPressed:w,onBreadCrumbUrlPressed:x,onCallActionFromToolBar:X,onDiscardDraft:Z,onDiscardSubItem:$,addEntry:_,deleteEntries:a1,onContactDetails:b1};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(o,e,s,f){q.extend(this,d(o,e,s,f));}});});
