sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";function g(c,C){var h;var H=null;var s;var r=0;var e=[];function a(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TITLE"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(t,E,i){if(typeof i!=="function"){throw new Error("Event handler must be a function");}e.push({template:t,event:E,handler:i});}function d(t,E,u){for(var i=e.length;i--;){if(e[i].handler===u&&e[i].event===E&&e[i].template===t){e.splice(i,1);}}}function f(t,E,u){for(var i=0;i<e.length;i++){if(e[i].event===E&&e[i].template===t){e[i].handler(u);}}}function b(i){return i.getMetadata().getName();}function F(){var i=c.getAppComponent();i.firePageDataLoaded();}function p(i){h.then(function(t){if(t&&!i.outdated){i.promise.then(function(){f(b(C.oController),"PageDataLoaded",{context:t});F();});}});}function D(i){if(!H){h=new Promise(function(t){H=t;});}if(!c.getComponentContainer().getElementBinding().isSuspended()){C.oApplication.getBusyHelper().setBusyReason(i,true,false);}}function j(i){C.oApplication.getBusyHelper().setBusyReason(i,false);}function k(i,E){var t=E.getSource().getBoundContext();if(t){if(H){H(t);}(C.methods.updateBindingContext||q.noop)();}else{var u=a();var N=c.getAppComponent().getNavigationController();N.navigateToMessagePage({title:u.dataLoadFailedTitle,text:u.dataLoadFailedText});}H=null;C.oApplication.getBusyHelper().setBusyReason(i,false);}function R(i){var P={};var t=c.getComponentData();if(t&&t.preprocessorsData&&t.preprocessorsData.rootContextExpand&&t.preprocessorsData.rootContextExpand.length){P.expand=t.preprocessorsData.rootContextExpand.join(",");}if(s){C.oApplication.getBusyHelper().setBusyReason(s,false);}r++;s="HeaderRequest::"+c.getId()+"::"+r;h=new Promise(function(u){H=u;c.getComponentContainer().bindElement({path:i,events:{dataRequested:D.bind(null,s),dataReceived:j.bind(null,s),change:k.bind(null,s)},parameters:P,batchGroupId:"Changes",changeSetId:"Changes"});});}function l(i,I){var t;if(i){var u=c.getComponentContainer();if(u){if(C.utils.getCreateMode(i)){u.unbindElement();u.setBindingContext(u.getModel().getContext(i));}else{t=C.oApplication.getCurrentDisplayObject();var E=u.getElementBinding();if(E){if(E.getPath()===i){if(E.isSuspended()){E.resume();}if(H){C.oApplication.getBusyHelper().setBusyReason(s,true,false);}p(t);return;}else if(!I){u.unbindElement();}}var U=c.getModel("ui");U.setProperty("/enabled",false);U.setProperty("/editable",false);R(i);p(t);}}}else{t=C.oApplication.getCurrentDisplayObject();t.promise.then(F);}}function S(){var i=c.getComponentContainer();var E=i.getElementBinding();if(E&&!E.isSuspended()){E.suspend();C.oApplication.getBusyHelper().setBusyReason(s,false);}}function m(i){C.oApplication.setBackNavigation(i);}function n(t){C.oApplication.setTitle(t);}function o(){return c.getModel("_templPriv");}return{setEditableNDC:function(i){C.oApplication.setEditableNDC(i);},getEditableNDC:function(){return C.oApplication.getEditableNDC();},getBusyHelper:function(){return C.oApplication.getBusyHelper();},getCreateMode:function(i){var E;var M=c.getModel();if(i){if(M){E=M.getProperty(i);}}else{var t=c.getBindingContext();if(t){E=t.getObject();}}return!!(E&&E.__metadata&&E.__metadata.created);},attach:function(i,E,t){A(b(i),E,t);},detach:function(i,E,t){d(b(i),E,t);},fire:function(i,E,t){f(b(i),E,t);},addDataForNextPage:function(i){C.oApplication.addDataForNextPage(i);},getCurrentDisplayObject:function(){return C.oApplication.getCurrentDisplayObject();},rebindHeaderData:R,bindComponent:l,suspendBinding:S,setBackNavigation:m,setTitle:n,getTemplatePrivateModel:o};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils.js",{constructor:function(c,C){q.extend(this,g(c,C));}});});
