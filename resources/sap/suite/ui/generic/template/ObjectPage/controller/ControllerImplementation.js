sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/ui/core/routing/HashChanger","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/table/AnalyticalTable","sap/ui/comp/smarttable/SmartTable","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/MessageButtonHelper","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/core/mvc/ViewType"],function(q,B,D,H,M,a,F,S,A,b,c,d,t,E,J,e,V){"use strict";function I(s){return s.data("inlineCreate")==="true";}return{getMethods:function(v,T,C){var s={aUnsavedDataCheckFunctions:[]};var f;var g;var h;function l(i){var j=C.getView().getModel("ui");j.setProperty("/editable",i);if(f&&!T.oCommonUtils.isDraftEnabled()){T.oComponentUtils.setEditableNDC(i);}}function m(i){if(I(i.getSource())){var j=i.getParameter("bindingParams");if(j.filters&&j.filters.length){var k=new F({path:"HasActiveEntity",operator:"EQ",value1:false});j.filters=[new F({filters:[new F(j.filters),k],and:false,bAnd:false})];}var x=j.sorter[0]&&j.sorter[0].fnGroup;var k1=x&&function(l1){var m1=l1.getObject();if(m1.IsActiveEntity||m1.HasActiveEntity){var n1=q.extend({},x(l1));n1.key=n1.key.charAt(0)==="ยง"?"ยง"+n1.key:n1.key;return n1;}return{key:"ยง",text:T.oCommonUtils.getText("NEW_ENTRY_GROUP")};};j.sorter.unshift(new S("HasActiveEntity",false,k1));}}function o(i,j){var k=i;if(j){k=k+" - "+j;}sap.m.URLHelper.triggerEmail(null,k,document.URL);}function O(i,j){var k=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:i+" "+j}}});k.open();}function n(){var i=C.byId("objectPage");return i.getHeaderTitle();}function p(i){var j=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.fragments.ShareSheet",{shareEmailPressed:function(){var k=j.getModel("share");o(k.getProperty("/objectTitle"),k.getProperty("/objectSubtitle"));},shareJamPressed:function(){var k=j.getModel("share");O(k.getProperty("/objectTitle"),k.getProperty("/objectSubtitle"));}},"share",function(k1,k){var l1=sap.ui.getCore().getLibraryResourceBundle("sap.m");k.setProperty("/emailButtonText",l1.getText("SEMANTIC_CONTROL_SEND_EMAIL"));k.setProperty("/jamButtonText",l1.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));k.setProperty("/bookmarkButtonText",l1.getText("SEMANTIC_CONTROL_SAVE_AS_TILE"));var m1=q.sap.getObject("sap.ushell.Container.getUser");k.setProperty("/jamVisible",!!m1&&m1().isJamActive());});var k=j.getModel("share");var x=n();k.setProperty("/objectTitle",x.getProperty("objectTitle"));k.setProperty("/objectSubtitle",x.getProperty("objectSubtitle"));k.setProperty("/bookmarkCustomUrl",document.URL);j.openBy(i.getSource());}function r(){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(j){var k=j.getSource();var x=k.getBindingContext("buttons");var k1=x.getProperty("link");var l1=x.getProperty("param");var m1=k1.intent;var n1=m1.split('#')[1].split('-')[0];var o1=m1.split('-')[1].split('?')[0].split('~')[0];var p1={target:{semanticObject:n1,action:o1},params:l1};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(p1);}},"buttons");return i;}function u(){var i=C.getOwnerComponent();var j=i.getNavigationProperty();var k=T.oCommonUtils;var x=C.byId("objectPageHeader");if(x.getProperty("objectTitle")!==""){if(x.getProperty("objectSubtitle")!==""){var k1=[" ",x.getProperty("objectTitle").trim(),x.getProperty("objectSubtitle")];var l1=k.getText("DELETE_WITH_OBJECTINFO",k1);}else{var k1=[x.getProperty("objectTitle").trim()];var l1=k.getText("DELETE_WITH_OBJECTTITLE",k1);}}else{var l1=k.getText("ST_GENERIC_DELETE_SELECTED");}M.show(l1,{icon:M.Icon.WARNING,styleClass:T.oCommonUtils.getContentDensityClass(),title:k.getText("DELETE"),actions:[M.Action.DELETE,M.Action.CANCEL],onClose:function(m1){if(m1===M.Action.DELETE){var n1=T.oServices.oCRUDManager.deleteEntity();n1.then(function(){T.oServices.oViewDependencyHelper.setParentToDirty(i,j);T.oServices.oViewDependencyHelper.unbindChildren(i,true);T.oServices.oNavigationController.navigateBack();});var o1={deleteEntityPromise:n1};T.oComponentUtils.fire(C,"AfterDelete",o1);}}});}function w(i){var j,k;if(i){k=i.context||i;if(T.oServices.oDraftController.getDraftContext().hasDraft(k)){T.oServices.oViewDependencyHelper.setRootPageToDirty();j=i.context&&i.context.context||i.context||i;}}if(j){if(g){g(j);}else{T.oServices.oNavigationController.navigateToContext(j,undefined,true,2);}}else{var h1=T.oComponentUtils.getTemplatePrivateModel();h1.setProperty("/objectPage/displayMode",2);}l(true);}var y;function z(i){T.oServices.oCRUDManager.editEntity(i).then(function(j){if(j.draftAdministrativeData){y(j.draftAdministrativeData.CreatedByUserDescription||j.draftAdministrativeData.CreatedByUser);}else{w(j.context);}});}function G(k){var x=function(k,i){var j=i.dependent.propertyRef[0].name;var t1=k.getParameters().originalId;var u1=C.getView().byId(t1);if(u1&&u1.mProperties.fieldName===j){return true;}if(!u1&&!t1.indexOf("::")>-1){var v1=q("#"+t1);if(v1){u1=v1.control(0);if(u1&&u1.mProperties.fieldName===j){return true;}}}return false;};var k1=function(k){var l1,p1,q1,t1,u1,v1,w1;p1=k.getSource().getModel().getMetaModel();q1=p1.getODataEntitySet(k.getSource().getEntitySet());t1=p1.getODataEntityType(q1.entityType);if(!t1||!t1.navigationProperty){return;}for(var i=0;i<t1.navigationProperty.length;i++){u1=t1.navigationProperty[i];if(u1.name==="SiblingEntity"||u1.name==="DraftAdministrativeData"){continue;}var x1=u1.relationship;var y1=x1.lastIndexOf(".");var z1=x1.slice(0,y1);var A1=x1.slice(y1+1);var B1=p1.getObject("/dataServices/schema");var C1;for(var j in B1){if(B1[j].namespace===z1){C1=B1[j];break;}}var D1=C1.association;var E1;for(var j in D1){if(D1[j].name===A1){E1=D1[j];break;}}var F1=E1.referentialConstraint;if(F1&&F1.dependent&&F1.dependent.propertyRef){var G1=x(k,F1);if(G1){v1=p1.getODataAssociationEnd(t1,u1.name);w1=p1.getODataEntityType(v1.type);if(w1["com.sap.vocabularies.UI.v1.QuickViewFacets"]){var H1=p1.getODataEntityContainer();var I1="";var J1="";for(var j=0;j<H1.entitySet.length;j++){if(H1.entitySet[j].entityType===w1.entityType){I1=H1.entitySet[j].name;J1=H1.entitySet[j].entityType;break;}}var K1=p1.getODataEntityType(J1,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";l1={navigation:u1.name,entitySet:I1,quickViewFacetODataPath:K1};return l1;}}}}return l1;};var l1=k1(k);var m1=k.getParameters();if(l1){var n1=C.getOwnerComponent();var o1=n1.getModel();var p1=o1.getMetaModel();var q1=p1.getODataEntitySet(n1.getEntitySet());var r1=new J({fieldsEnabled:false,navigationPath:l1.navigation});r1.setDefaultBindingMode("OneWay");var s1=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{meta:p1.createBindingContext(p1.getODataEntityType(q1.entityType,true)),entitySet:p1.createBindingContext(p1.getODataEntitySet(l1.entitySet,true)),facetCollection:p1.createBindingContext(l1.quickViewFacetODataPath,true)},models:{quickView:r1,meta:p1,entitySet:p1,facetCollection:p1},preprocessorsData:n1.getComponentData().preprocessorsData}},type:V.XML,viewName:"sap.suite.ui.generic.template.ObjectPage.view.QuickViewSmartForm",height:"100%"});m1.show(undefined,undefined,undefined,s1);}else{m1.show();}}y=function(i){var j=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){j.close();z(true);},onCancel:function(){j.close();}},"Dialog");var k=j.getModel("Dialog");var x=T.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[i]);k.setProperty("/unsavedChangesQuestion",x);j.open();};var K;function L(){K=K||T.oCommonUtils.getText("NEW_OBJECT");return K;}var N;function P(){return N||H.getInstance();}function R(i,j,k){if(!i.getContent){return;}i.getContent().forEach(function(x){if(x instanceof b){if(k||j[x.getTableBindingPath()]){if(x.isInitialised()){x.rebindTable(k);}else{x.attachInitialise(function(){x.rebindTable(k);});}if(!k){T.oServices.oApplicationController.executeSideEffects(C.getOwnerComponent().getBindingContext(),[],[x.getTableBindingPath()]);}}}});}function Q(i){var j=sap.ui.getCore().byId(n().getId()+"-lock");j.setVisible(i);}function U(){var j="{\"SelectionVariantID\":\"\"}";var k=C.getOwnerComponent();var k1=k.getEntitySet();var l1=k.getModel();var m1=l1.getMetaModel();var n1=m1.getODataEntitySet(k1);var o1=m1.getODataEntityType(n1.entityType);var p1=o1.property;var q1=[];for(var x in p1){var r1=p1[x]["sap:field-control"];if(r1&&q1.indexOf(r1)<0){q1.push(p1[x]["sap:field-control"]);}}var s1=C.getView().getBindingContext();var t1=s1.getObject();var u1=new c();for(var i in p1){var v1=p1[i].type;var w1=p1[i].name;var x1=t1[p1[i].name];if(q1.indexOf(w1)>-1){continue;}if(w1&&(x1||v1==="Edm.Boolean")){if(v1==="Edm.Time"&&x1.ms!==undefined){x1=x1.ms;}if(typeof x1!=="string"){x1=x1.toString();}u1.addParameter(w1,x1);}}j=u1.toJSONString();return j;}function W(i,j){var k=true;var x=j.getModel();var k1=T.oCommonUtils.getDeleteRestrictions(j);var l1=k1&&k1.Deletable&&k1.Deletable.Path;if(l1){k=x.getProperty(l1,i);}return k;}function X(j){var k=T.oServices.oApplication.getBusyHelper();if(k.isBusy()){return;}var x=j.getSource();var k1=T.oCommonUtils.getOwnerControl(x);var l1=T.oCommonUtils.getSelectedContexts(k1);if(l1.length===0){M.error(T.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:T.oCommonUtils.getContentDensityClass()});return;}var m1=[];var n1=[];for(var i=0;i<l1.length;i++){if(W(l1[i],k1)){m1.push(l1[i].getPath());}else{n1.push(l1[i]);}}if(n1.length>0){M.error(T.oCommonUtils.getText("ST_GENERIC_DELETE_UNDELETABLE_SUBITEMS",[n1.length,l1.length]),{styleClass:T.oCommonUtils.getContentDensityClass()});}var o1=T.oServices.oCRUDManager.deleteEntities(m1);k.setBusy(o1);o1.then(function(){T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());k1.getTable().attachEventOnce("updateFinished",function(){T.oCommonUtils.setEnabledToolbarButtons(k1);});k1.rebindTable();});}function Y(){var i=C.byId("imageDialog")||T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");return i;}function Z(){var i=C.getOwnerComponent();var h1=i.getModel("_templPriv");var i1=h1.getProperty("/generic/viewLevel")-1;return"/generic/paginatorInfo/"+i1;}function $(){var i=C.getOwnerComponent();var j=i.getModel("_templPrivGlobal");var k=j.getProperty(Z());return k;}function _(){var i=C.getOwnerComponent();var h1=i.getModel("_templPriv");var j=i.getModel("_templPrivGlobal");var k=$();var x=!!k&&(!h||j.getProperty("/generic/FCL/isFullscreen"));var k1=x&&(k.selectedRelativeIndex!==(k.listBinding.getLength()-1));var l1=x&&k.selectedRelativeIndex>0;h1.setProperty("/objectPage/navButtons/navUpEnabled",l1);h1.setProperty("/objectPage/navButtons/navDownEnabled",k1);h1.setProperty("/objectPage/navButtons/navBtnsVisible",k1||l1);}function a1(){var i=C.getOwnerComponent();var h1=i.getModel("_templPriv");var j=T.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;if(j&&j.addEntry){j.addEntry=false;h1.setProperty("/backToPrevious",T.oCommonUtils.getText("ADD"));}else if(j&&j.currentPageTitle){h1.setProperty("/backToPrevious",T.oCommonUtils.getText("ST_GENERIC_BACK_TO",j.currentPageTitle));}else{h1.setProperty("/backToPrevious",T.oCommonUtils.getText("BACK"));}}function b1(){var i=C.getOwnerComponent();var j=i.getModel().getMetaModel();var k=j.getODataEntitySet(i.getEntitySet());var x;var k1=k["Org.OData.Capabilities.V1.DeleteRestrictions"];if(k1&&k1.Deletable){x=k1.Deletable.Bool;}var h1=i.getModel("_templPriv");var l1=T.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;if(x!=='false'&&l1&&l1.addEntryForDeleteButton!==true){h1.setProperty("/deleteButtonOnFooter",true);}else{h1.setProperty("/deleteButtonOnFooter",false);}}function c1(){var i=C.getOwnerComponent();var j=i.getModel().getMetaModel();var k=j.getODataEntitySet(i.getEntitySet());var x;var k1=k["Org.OData.Capabilities.V1.DeleteRestrictions"];if(k1&&k1.Deletable){x=k1.Deletable.Bool;}var h1=i.getModel("_templPriv");var l1=T.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;if(x!=='false'&&l1&&l1.addEntryForCancelButton){h1.setProperty("/cancelButtonOnFooter",true);}else{h1.setProperty("/cancelButtonOnFooter",false);}}function d1(){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var i=T.oCommonUtils.isDraftEnabled();if(f&&!i){l(false);}T.oServices.oNavigationController.navigateBack();},q.noop,s);}function e1(i,j){var h1=T.oComponentUtils.getTemplatePrivateModel();var i1=h1.getProperty("/generic/viewLevel");var k=i1>1?T.oCommonUtils.getTableBinding(j).path:null;T.oServices.oNavigationController.navigateToContext(i,k,true);}function f1(){var i=sap.ui.getCore().getLibraryResourceBundle("sap.m");var h1=T.oComponentUtils.getTemplatePrivateModel();h1.setProperty("/objectPage/navButtons",{navDownTooltip:i.getText("FACETFILTER_NEXT"),navUpTooltip:i.getText("FACETFILTER_PREVIOUS"),navDownEnabled:false,navUpEnabled:false,navBtnsVisible:false});}v.refreshFacets=function(i,j){C.byId("objectPage").getSections().forEach(function(k){k.getSubSections().forEach(function(x){x.getBlocks().forEach(function(k1){R(k1,i,j);});x.getMoreBlocks().forEach(function(k1){R(k1,i,j);});});});};v.onComponentActivate=function(i){s.messageButtonHelper.adaptToContext(i);_();a1();b1();c1();var j=C.getOwnerComponent();var k=j.getModel().getMetaModel();var x=k.getODataEntitySet(j.getEntitySet());var k1=k.getODataEntityType(x.entityType);var l1=k1["com.sap.vocabularies.UI.v1.HeaderInfo"];var m1=l1.TypeName.String;if(m1.substr(0,7)==="{@i18n>"){var n1=m1.substring(1,m1.length-1);var o1=n1.split(">");m1=j.getModel(o1[0]).getResourceBundle().getText(o1[1]);}T.oComponentUtils.setTitle(m1);T.oComponentUtils.setBackNavigation(d1);};v.draftResume=function(j,k,x){var k1=j.getObject();if(!k1||!k1.hasOwnProperty("IsActiveEntity")||k1.IsActiveEntity!==false){return;}var l1=C.getView().getModel();var m1=l1.getMetaModel();var n1=m1.getODataEntitySet(C.getOwnerComponent().getEntitySet());var o1=m1.getODataEntityType(n1.entityType);var p1="";var q1="";var r1=o1["com.sap.vocabularies.Common.v1.SemanticKey"];for(var i in r1){var s1=r1[i];if(q1===""){q1=k[s1.PropertyPath];}else{q1=q1+"-"+k[s1.PropertyPath];}}var t1="-";if(x&&x.LastChangeDateTime!==null){var u1=D.getDateTimeInstance({pattern:"MMMM d, yyyy HH:mm",style:"long"});t1=u1.format(x.LastChangeDateTime);}var v1=[p1,q1,t1];var w1=T.oCommonUtils.getText("DRAFT_FOUND_RESUME",v1);var x1;var y1=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.DraftResumeDialog",{onDraftResume:function(){y1.close();T.oServices.oNavigationController.navigateToContext(x1.getProperty("/siblingContext"),null,true);},onDraftDiscard:function(){y1.close();C.getView().getModel("ui").setProperty("/enabled",true);T.oServices.oCRUDManager.deleteEntity(true);Q(false);x1.getProperty("/activeEntity").HasDraftEntity=false;T.oServices.oViewDependencyHelper.setAllPagesDirty();},onResumeDialogClosed:function(){x1.setProperty("/siblingContext",null);x1.setProperty("/activeEntity",null);}},"Dialog");x1=y1.getModel("Dialog");x1.setProperty("/draftResumeText",w1);x1.setProperty("/siblingContext",j);x1.setProperty("/activeEntity",k);y1.open();};v.bindBreadCrumbs=function(j){if(!j.length){return;}var k=n();var x=k&&k.getBreadCrumbsLinks();if(!x||!x.length){return;}N=P();var k1="",l1,m1,n1,o1,p1,q1,r1;for(var i=0;i<j.length;i++){n1=j[i];if(k1===""){k1=n1;}else{k1=k1+"/"+n1;}if(x[i]){o1=x[i];l1=o1.getCustomData()&&o1.getCustomData()[0];if(l1&&l1.getKey()==="entitySet"){m1=l1.getValue();p1=n1.split("(");if(p1&&p1[1]){if(N.hrefForAppSpecificHash){r1=N.hrefForAppSpecificHash(k1);}else{r1="#/"+k1;}q1="/"+m1+"("+p1[1];o1.setHref(r1);o1.bindElement(q1);}}}}};var z=t.testable(z,"editEntity");var a1=t.testable(a1,"backToPrevObject");var b1=t.testable(b1,"deleteButtonOnFooter");var c1=t.testable(c1,"cancelButtonOnFooter");var P=t.testable(P,"getHashChangerInstance");var W=t.testable(W,"isEntryDeletable");var g1={onInit:function(){f1();T.oCommonUtils.executeGlobalSideEffect();s.messageButtonHelper=new d(T.oCommonUtils,C);T.oServices.oTemplateCapabilities.oMessageButtonHelper=s.messageButtonHelper;v.isDraftEnabled=T.oCommonUtils.isDraftEnabled;},handlers:{addEntry:function(i){var j=i.getSource();var k=T.oCommonUtils.getOwnerControl(j);var x=I(k);if(!j.data("CrossNavigation")&&x){T.oCommonEventHandlers.addEntry(j,true);return;}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.addEntry(j,false);},q.noop,s);},deleteEntries:X,onSelectionChange:function(i){T.oCommonUtils.setEnabledToolbarButtons(i.getSource());},onBack:d1,onCancel:function(){var i="Proceed";if(T.oComponentUtils.getCreateMode()||!f){i="LeavePage";}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){if(f){l(false);}if(T.oComponentUtils.getCreateMode()||!f){T.oServices.oNavigationController.navigateBack();}},q.noop,s,i);},onContactDetails:function(i){T.oCommonEventHandlers.onContactDetails(i);},onPressDraftInfo:function(i){var j=C.getView().getBindingContext();var k=sap.ui.getCore().byId(i.getSource().getId()+(i.getId()==="markChangesPress"?"-changes":"-lock"));T.oCommonUtils.showDraftPopover(j,k);},onShareObjectPageActionButtonPress:p,onRelatedApps:function(x){var k1,l1,m1,n1,o1,p1,q1;var r1,s1,t1,u1,v1;k1=x.getSource();t1=sap.ushell&&sap.ushell.Container;l1=t1&&t1.getService("URLParsing");m1=l1.parseShellHash(document.location.hash);u1=m1.semanticObject;v1=m1.action;n1=C.getView&&C.getView().getBindingContext();var w1=C.getOwnerComponent().getModel().getMetaModel();var x1=n1.getObject();var y1=x1.__metadata.type;var z1=w1.getODataEntityType(y1);var A1=z1["com.sap.vocabularies.Common.v1.SemanticKey"];var B1={};if(A1&&A1.length>0){for(var j=0;j<A1.length;j++){var C1=A1[j].PropertyPath;if(!B1[C1]){B1[C1]=[];B1[C1].push(x1[C1]);}}}else{for(var k in z1.key.propertyRef){var D1=z1.key.propertyRef[k].name;if(!B1[D1]){B1[D1]=[];B1[D1].push(x1[D1]);}}}o1=C.getOwnerComponent().getAppComponent();p1=t1&&t1.getService("CrossApplicationNavigation");q1=p1.getLinks({semanticObject:u1,params:B1,ui5Component:o1});r1=r();s1=r1.getModel("buttons");s1.setProperty("/buttons",[]);r1.openBy(k1);q1.done(function(E1){var F1=[];for(var i=0;i<E1.length;i++){var G1=E1[i];var H1=G1.intent;var I1=H1.split("-")[1].split("?")[0];if(I1!=v1){F1.push({enabled:true,text:G1.text,link:G1,param:B1});}}if(F1.length===0){F1.push({enabled:false,text:T.oCommonUtils.getText("NO_RELATED_APPS")});}s1.setProperty("/buttons",F1);});},onSemanticObjectLinkPopoverLinkPressed:function(i){T.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(i,s);},handleShowNextObject:function(i){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=$();var x=k.listBinding;var k1=k.endIndex;var l1=k.selectedRelativeIndex+1;var m1=k.objectPageNavigationContexts;var n1=k.growingThreshold;var o1=C.getOwnerComponent().getModel("_templPrivGlobal");var p1=Z();if(l1&&m1){var q1=m1[l1];if(q1){o1.setProperty(p1+"/selectedRelativeIndex",l1);e1(q1,k.tableNavFrom);}else{var r1=new Promise(function(s1,t1){var u1=k1+1+n1;var v1=function(w1){var x1=w1.getSource().getContexts(0,u1);o1.setProperty(p1+"/objectPageNavigationContexts",x1);o1.setProperty(p1+"/endIndex",u1);q1=x1[l1];x.detachDataReceived(v1);o1.setProperty(p1+"/selectedRelativeIndex",l1);e1(q1,k.tableNavFrom);s1();};x.attachDataReceived(v1);x.loadData(0,u1);});j.setBusy(r1);}}},handleShowPrevObject:function(i){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}var j=$();var k=j.selectedRelativeIndex-1;var x=j.objectPageNavigationContexts;var k1=C.getOwnerComponent();var l1=k1.getModel("_templPrivGlobal");if(x){var m1=x[k];if(m1&&m1.getPath){l1.setProperty(Z()+"/selectedRelativeIndex",k);e1(m1,j.tableNavFrom);}}},onShowMessages:function(){s.messageButtonHelper.toggleMessagePopover();},onEdit:function(i){var j=i.getSource();if(j.data("CrossNavigation")){T.oCommonEventHandlers.onEditNavigateIntent(j);return;}f=true;z();},onSave:function(){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}var i=C.getView().getBindingContext();var j=C.getView().getModel().getPendingChanges();j=j&&j[i.getPath().replace("/","")]||{};var k=Object.keys(j)||[];var x=T.oComponentUtils.getCreateMode();var k1=k.indexOf("__metadata");if(k1>-1){k.splice(k1,1);}var l1=T.oServices.oCRUDManager.saveEntity();l1.then(function(n1){if(!T.oCommonUtils.isDraftEnabled()&&f){l(false);}else if(T.oCommonUtils.isDraftEnabled()){l(false);}if(x){if(n1&&n1.getPath()!=="/undefined"){T.oServices.oNavigationController.navigateToContext(n1,undefined,true);}else{l(false);T.oServices.oNavigationController.navigateBack();}T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_CREATED"));}else{T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(!T.oCommonUtils.isDraftEnabled()&&!f){T.oServices.oNavigationController.navigateBack();}}if(k.length>0){T.oServices.oApplicationController.executeSideEffects(i,k);}});var m1={saveEntityPromise:l1};T.oComponentUtils.fire(C,"AfterSave",m1);},onActivate:function(i){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}q.sap.log.info("Activate object");var j=T.oServices.oCRUDManager.activateDraftEntity();j.then(function(x){T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(x&&x.context){T.oServices.oViewDependencyHelper.setAllPagesDirty([C.getOwnerComponent().getId()]);T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());T.oServices.oNavigationController.navigateToContext(x.context,undefined,true);}});var k={activationPromise:j};T.oComponentUtils.fire(C,"AfterActivate",k);},onSmartFieldUrlPressed:function(i){T.oCommonEventHandlers.onSmartFieldUrlPressed(i,s);},onBreadCrumbUrlPressed:function(i){T.oCommonEventHandlers.onBreadCrumbUrlPressed(i,s);},onDiscardDraft:function(i){T.oCommonEventHandlers.onDiscardDraft(i);},onDiscardSubItem:function(i){T.oCommonEventHandlers.onDiscardSubItem(i);},onDelete:function(i){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}u();},onCallActionFromToolBar:function(i){T.oCommonEventHandlers.onCallActionFromToolBar(i,s);},onCallAction:function(i){var j=C.getOwnerComponent();var k=j.getNavigationProperty();var x=T.oCommonUtils.getCustomData(i);var k1=[];k1.push(C.getView().getBindingContext());if(k1[0]&&x.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var l1={functionImportPath:x.Action,contexts:k1,sourceControl:"",label:x.Label,operationGrouping:x.InvocationGrouping,navigationProperty:C.getOwnerComponent().getNavigationProperty()};T.oServices.oCRUDManager.callAction(l1).then(function(m1){var n1=m1&&m1[0];if(n1&&n1.response&&n1.response.context&&(!n1.actionContext||n1.actionContext&&n1.response.context.getPath()!==n1.actionContext.getPath())){T.oServices.oViewDependencyHelper.setParentToDirty(j,k);}});},q.noop,s,"Proceed");}},onDataFieldForIntentBasedNavigation:function(i){T.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(i,s);},onChartInit:function(i){var j=i.getSource().getChart();var k=C._templateEventHandlers.onSelectionChange;j.attachSelectData(k).attachDeselectData(k);},onBeforeRebindDetailTable:function(i){T.oCommonEventHandlers.onBeforeRebindTable(i,T.oCommonUtils);C.onBeforeRebindTableExtension(i);m(i);if(i.getSource().getTable()instanceof A){var j=i.getParameter("bindingParams");j.parameters.entitySet=i.getSource().getEntitySet();}},onShowDetails:function(i){T.oCommonEventHandlers.onShowDetails(i.getSource(),s);},onListNavigate:function(i){T.oCommonEventHandlers.onListNavigate(i.getSource(),s);},onBeforeSemanticObjectLinkPopoverOpens:function(i){var j=i.getParameters();T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var k=T.oCommonUtils.getNavigationHandler();if(k){var x=U();k.processBeforeSmartLinkPopoverOpens(j,x);}else{j.open();}},q.noop,s,q.noop);},onSemanticObjectLinkNavigationTargetObtained:function(i){G(i);},onHeaderImagePress:function(i){var j=Y();var k=i.getSource().getId();j.addAriaLabelledBy(k);var x=j.getModel("headerImage");x.setProperty("/src",i.getSource().getSrc());if(sap.ui.Device.system.phone){j.setProperty("stretch",true);}j.open();},onInlineDataFieldForAction:function(i){var j=i.getSource();var k=T.oCommonUtils.getElementCustomData(j);var x=T.oCommonUtils.getOwnerControl(j);var k1=x.getParent().getTableBindingPath();var l1=[j.getBindingContext()];T.oCommonUtils.triggerAction(l1,k1,k,j,s);},onInlineDataFieldForIntentBasedNavigation:function(i){T.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(i.getSource(),s);},onDeterminingDataFieldForAction:function(i){var j=[this.getView().getBindingContext()];var k=i.getSource();var x=T.oCommonUtils.getElementCustomData(k);var k1=this.getView().getBindingPath();T.oCommonUtils.triggerAction(j,k1,x);},onBeforeRebindChart:function(i){var j=i.getSource();j.oModels=j.getChart().oPropagatedProperties.oModels;}},formatters:{formatDefaultObjectTitle:function(i,j){if(j||!i){return;}var k=C.getView().getBindingContext();var x=k&&k.getObject();if(i&&x&&(x.IsActiveEntity===undefined||x.IsActiveEntity===false||x.HasActiveEntity===false)){return L();}}},extensionAPI:new E(T,C,s)};var h1=T.oComponentUtils.getTemplatePrivateModel();var i1=h1.getProperty("/generic/viewLevel");var j1=T.oServices.oApplication.getFclProxy(i1);if(j1.oActionButtonHandlers){g1.handlers.fclActionButtonHandlers=j1.oActionButtonHandlers;h=true;}g=j1.navigateToDraft;return g1;}};});
