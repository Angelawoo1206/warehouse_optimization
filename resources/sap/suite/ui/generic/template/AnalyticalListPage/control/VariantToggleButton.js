sap.ui.define(["sap/m/ToggleButton","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagement"],function(T,P,S){"use strict";var V=T.extend("sap.suite.ui.generic.template.AnalyticalListPage.control.VariantToggleButton",{renderer:{},metadata:{properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:null}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}}}});V.prototype.init=function(){var m=this;if(T.prototype.init){T.prototype.init.call(m);}m.attachPress(m._handlePress);m._bApplyingVariant=false;};V.prototype.setSmartVariant=function(s){var m=this;m.setAssociation("smartVariant",s);if(s){var p=new P({type:"alr_togglebutton",keyName:"persistencyKey",dataSource:"TODO"});p.setControl(m);}m._oVariantManagement=m._getVariantManagementControl(s);if(m._oVariantManagement){m._oVariantManagement.addPersonalizableControl(p);m._oVariantManagement.initialise(m._variantInitialised,m);}else if(s){if(typeof s==="string"){jQuery.sap.log.error("[VariantToggleButton] Variant with id="+s+" cannot be found");}else if(s instanceof sap.ui.core.Control){jQuery.sap.log.error("[VariantToggleButton] Variant with id="+s.getId()+" cannot be found");}}else{jQuery.sap.log.error("[VariantToggleButton] Missing SmartVariant");}};V.prototype.applyVariant=function(v,c){var m=this;m._bApplyingVariant=true;m._oCurrentVariant=v;if(m._oCurrentVariant==="STANDARD"){m._oCurrentVariant=null;}if(m._oCurrentVariant&&m._oCurrentVariant.pressed!=""&&m._oCurrentVariant.pressed!==m.getPressed()){m.setPressed(m._oCurrentVariant.pressed);m.firePress({pressed:m.getPressed()});}m._bApplyingVariant=false;};V.prototype.fetchVariant=function(){var m=this;if(m._oCurrentVariant==="STANDARD"||m._oCurrentVariant===null){m._oCurrentVariant={pressed:m.getPressed()};}return m._oCurrentVariant;};V.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}};V.prototype._getVariantManagementControl=function(s){var o=null;if(s){if(typeof s==="string"){o=sap.ui.getCore().byId(s);}else{o=s;}if(o){if(!(o instanceof S)){jQuery.sap.log.error("Control with the id="+s.getId?s.getId():s+" not of expected type");return null;}}}return o;};V.prototype._handlePress=function(e){var m=this;m._oCurrentVariant={pressed:m.getPressed()};if(m._oVariantManagement&&!m._bApplyingVariant){m._oVariantManagement.currentVariantSetModified(true);}};return V;},true);
