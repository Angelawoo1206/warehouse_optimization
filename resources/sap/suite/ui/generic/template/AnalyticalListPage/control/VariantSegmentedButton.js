sap.ui.define(["sap/m/SegmentedButton","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagement"],function(S,P,a){"use strict";var V=S.extend("sap.suite.ui.generic.template.AnalyticalListPage.control.VariantSegmentedButton",{renderer:{},metadata:{properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:null}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}}}});V.prototype.init=function(){var m=this;if(S.prototype.init){S.prototype.init.call(m);}m.attachSelect(m._handleSelection);m._bApplyingVariant=false;};V.prototype.setSmartVariant=function(s){var m=this;m.setAssociation("smartVariant",s);if(s){var p=new P({type:"alr_segmentedbutton",keyName:"persistencyKey",dataSource:"TODO"});p.setControl(m);}m._oVariantManagement=m._getVariantManagementControl(s);if(m._oVariantManagement){m._oVariantManagement.addPersonalizableControl(p);m._oVariantManagement.initialise(m._variantInitialised,m);}else if(s){if(typeof s==="string"){jQuery.sap.log.error("[VariantSegmentedButton] Variant with id="+s+" cannot be found");}else if(s instanceof sap.ui.core.Control){jQuery.sap.log.error("[VariantSegmentedButton] Variant with id="+s.getId()+" cannot be found");}}else{jQuery.sap.log.error("[VariantSegmentedButton] Missing SmartVariant");}};V.prototype.applyVariant=function(v,c){var m=this;m._bApplyingVariant=true;m._oCurrentVariant=v;if(m._oCurrentVariant==="STANDARD"){m._oCurrentVariant=null;}if(m._oCurrentVariant&&m._oCurrentVariant.selectedKey!=""&&m._oCurrentVariant.selectedKey!=m.getSelectedKey()){m.setSelectedKey(m._oCurrentVariant.selectedKey);m.fireSelect({button:null,id:null,key:m._oCurrentVariant.selectedKey});}m._bApplyingVariant=false;};V.prototype.fetchVariant=function(){var m=this;if(m._oCurrentVariant==="STANDARD"||m._oCurrentVariant===null){m._oCurrentVariant={selectedKey:m.getProperty("selectedKey")};}return m._oCurrentVariant;};V.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}};V.prototype._getVariantManagementControl=function(s){var o=null;if(s){if(typeof s==="string"){o=sap.ui.getCore().byId(s);}else{o=s;}if(o){if(!(o instanceof a)){jQuery.sap.log.error("Control with the id="+s.getId?s.getId():s+" not of expected type");return null;}}}return o;};V.prototype._handleSelection=function(e){var m=this;m._oCurrentVariant={selectedKey:m.getSelectedKey()};if(m._oVariantManagement&&!m._bApplyingVariant){m._oVariantManagement.currentVariantSetModified(true);}};return V;},true);
