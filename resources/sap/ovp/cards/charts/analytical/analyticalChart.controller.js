(function(){"use strict";sap.ui.controller("sap.ovp.cards.charts.analytical.analyticalChart",{onInit:function(){var v=this.getView().byId("analyticalChart");if(v){sap.ovp.cards.charts.VizAnnotationManager.formatChartAxes(v);}this.bFlag=true;},onBeforeRendering:function(){if(this.bCardProcessed){return;}sap.ovp.cards.charts.VizAnnotationManager.validateCardConfiguration(this);var a=this.getView().byId("analyticalChart");var b=this.getView().byId("bubbleText");var c=this.getView().byId("ovpCT");var d=sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("BUBBLESIZE");var n;if(!a){jQuery.sap.log.error(sap.ovp.cards.charts.VizAnnotationManager.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")");}else{n=a.getModel('ovpCardProperties').getProperty("/navigation");if(n=="chartNav"){a.attachBrowserEvent("click",this.onHeaderClick.bind(this));}else{sap.ovp.cards.charts.VizAnnotationManager.getSelectedDataPoint(a,this);}var h=a.getParent();sap.ovp.cards.charts.VizAnnotationManager.buildVizAttributes(a,h,c);if(b!=undefined){var f=a.getFeeds();jQuery.each(f,function(i,v){if(f[i].getUid()=="bubbleWidth"){b.setText(d+" "+f[i].getValues());}});}sap.ovp.cards.charts.VizAnnotationManager.hideDateTimeAxis(a);var e=a.getParent().getBinding("data");this._handleKPIHeader();if(e.getPath()){e.attachDataReceived(jQuery.proxy(this.onDataReceived,this));e.attachDataRequested(jQuery.proxy(this.onDataRequested,this));}else{var g=sap.ui.xmlfragment("sap.ovp.cards.charts.generic.noData");var j=this.getCardContentContainer();j.removeAllItems();j.addItem(g);}}this.bCardProcessed=true;},onDataReceived:function(e){var v=this.getView().byId("analyticalChart");var h=v.getParent();var c=this.getView().byId("ovpScaleUnit");var a=e?e.getParameter('data'):null;sap.ovp.cards.charts.VizAnnotationManager.setChartScaleTitle(v,a,h,c);if(this.bFlag==true){this.bFlag=false;}else{setTimeout(function(){v.setBusy(false);},0);}sap.ovp.cards.charts.VizAnnotationManager.checkNoData(e,this.getCardContentContainer(),v);},onDataRequested:function(){var v=this.getView().byId("analyticalChart");v.setBusy(true);},getCardItemsBinding:function(){var v=this.getView().byId("analyticalChart");return v.getParent().getBinding("data");}});})();
